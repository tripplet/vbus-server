<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="viewport" content="initial-scale = 1.0, user-scalable = no"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
  <link rel="apple-touch-icon" href="apple-touch-icon.png" size="152x152"/>
  <script src="jquery-2.2.0.min.js"></script>
  <script src="dygraph-combined.js"></script>
  <style type="text/css">
    #main_graph {
      position: absolute;
      left: 10px;
      right: 10px;
      top: 40px;
      bottom: 10px;
    }
  </style>
  <script type="text/javascript">
    $.urlParam = function(name){
      var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);

      if (results==null) { return null;            }
      else               { return results[1] || 0; }
    }

    $(document).ready(function () {
      view_timespan = $.urlParam('timespan');

      if (view_timespan==null) {
        view_timespan = "-24 hours";
      }

      new Dygraph(
        document.getElementById("main_graph"),
        "vbus-server?format=csv&timespan=" + view_timespan,
        {
          // axes : { x : { valueFormatter : Dygraph.dateString_ } },
          series : {
            'Ventil-Heizung' : {
              fillGraph: true,
              strokeWidth: 0.0
            },
            'Ventil-Ofen' : {
              fillGraph: true,
              strokeWidth: 0.0
            }
          },
          delimiter: ',',
          visibility: [true, true, true, true, true, true],
          colors: ['#CF252B', '#7B9F35', '#2D882D', '#2E71B0'],
          strokeWidth: 2.2,
          rollPeriod: 3,
          valueRange: [15, 76],
          legend: 'always',
	  labelsDivWidth: 400
        }
      );
    });
  </script>
  <title>Heizung</title>
</head>
<body>
<div id="main_graph">Loading...</div>
</body>
</html>
