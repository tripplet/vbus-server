<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="jquery-2.1.3.min.js"></script>
  <script src="dygraph-combined.js"></script>
  <style type="text/css">
    #main_graph {
      position: absolute;
      left: 10px;
      right: 10px;
      top: 40px;
      bottom: 10px;
    }
   </style>
  <script type="text/javascript">
    $.urlParam = function(name){
      var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
      
      if (results==null) { return null;            }
      else               { return results[1] || 0; } 
    }

    $(document).ready(function () {
      view_timespan = $.urlParam('timespan');

      if (view_timespan==null) {
        view_timespan = "-24 hours";
      }

      new Dygraph(
        document.getElementById("main_graph"),
        "vbus-server?" + view_timespan,
        {
          // axes : { x : { valueFormatter : Dygraph.dateString_ } },
          series : {
            'Ventil-Heizung' : {
              fillGraph: true,
              strokeWidth: 0.0
            },
            'Ventil-Ofen' : {
              fillGraph: true,
              strokeWidth: 0.0
            }
          },
          delimiter: ',',
          visibility: [true, true, true, true, true, true],
          colors: ['#CF252B', '#7B9F35', '#2D882D', '#2E71B0'],
          strokeWidth: 2.2,
          rollPeriod: 3,
          valueRange: [15, 76],
          legend: 'always',
	  labelsDivWidth: 400
        }
      );
    });
  </script>
</head>
  <title>Heizung</title>
</head>
<body>
<div id="main_graph"></div>
</body>
</html>
